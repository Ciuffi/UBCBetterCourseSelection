<!DOCTYPE html>
<html><head><meta name="GCD" content="YTk3ODQ3ZWZhN2I4NzZmMzBkNTEwYjJl2ba8b1b48e10c79226ac5d9354957641"/>
  <meta charset="utf-8">
  <title>UBC Course Database</title>
  <meta name="generator" content="Google Web Designer 4.0.1.0625">
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>
    function update() {
      lastScrape();
      scrapeStatus();
    }
    window.onload = update();

    function lastScrape() {
      $.get("/getLastScrapeTime", function(res) {
        $("#lastScrapeId").get(0).innerText = "Last Scrape: " + res;
      });
    }

    function scrapeStatus() {
      $.get("/scrapeStatus", function(res) {
        if (res) {
          $("#scrapeStatus").get(0).innerText = "Scrape Status: Scraping..";
        } else {
          $("#scrapeStatus").get(0).innerText = "Scrape Status: Not Scraping";
        }
      })
    }

    function getDepartments() {
      $.get("/getDepartments", function(res) {
        $("#result")[0].innerText = res;
        $("#result").removeClass("prettyprinted");
        PR.prettyPrint();
      })
    }

    function getDepartmentByCode() {
      code = $('#search')[0].value;
      $.get("/getDepartmentByCode", {
        code: code
      }, function(res) {
        $("#result")[0].innerText = res;
        $("#result").removeClass("prettyprinted");
        PR.prettyPrint();
      })
    }

    function getCoursesByCode() {
      code = $('#search')[0].value;
      $.get("/getCoursesByCode", {
        code: code
      }, function(res) {
        $("#result")[0].innerText = res;
        $("#result").removeClass("prettyprinted");
        PR.prettyPrint();
      })
    }

    function getSectionsByCode() {
      code = $('#search')[0].value;
      $.get("/getSectionsByCode", {
        code: code
      }, function(res) {
        $("#result")[0].innerText = res;
        $("#result").removeClass("prettyprinted");
        PR.prettyPrint();
      })
    }

    function updateSectionInfo() {
      code = $('#search')[0].value;
      $.get("/sectionData", {
        code: code
      }, function(res) {
        $("#result")[0].innerText = res;
        $("#result").removeClass("prettyprinted");
        PR.prettyPrint();
      })
    }

    function clearbox() {
      $("#result")[0].innerText = "";
      $("#result").removeClass("prettyprinted");
      PR.prettyPrint();
    }
  </script>
  <style type="text/css" id="gwd-text-style">p {
    margin: 0px;
}
h1 {
    margin: 0px;
}
h2 {
    margin: 0px;
}
h3 {
    margin: 0px;
}</style>
  <style type="text/css">html,
body {
    width: 100%;
    height: 100%;
    margin: 0px;
}
body {
    background-color: transparent;
    transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    -webkit-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    -moz-transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);
    perspective: 1400px;
    -webkit-perspective: 1400px;
    -moz-perspective: 1400px;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
}
.gwd-p-u6h5 {
    position: absolute;
    text-align: center;
    width: 751px;
    height: 46px;
    transform-origin: 375.496px 22.9962px 0px;
    -webkit-transform-origin: 375.496px 22.9962px 0px;
    -moz-transform-origin: 375.496px 22.9962px 0px;
    left: 176px;
    top: 8px;
}
.gwd-p-1vlm {
    position: absolute;
    width: 994px;
    height: 49px;
    transform-origin: 382.371px 75.3519px 0px;
    -webkit-transform-origin: 382.371px 75.3519px 0px;
    -moz-transform-origin: 382.371px 75.3519px 0px;
    left: 60px;
    top: 54px;
}
.gwd-div-190f {
    position: absolute;
    width: 337px;
    text-align: center;
    height: 83px;
    transform-origin: 168.577px 41.6788px 0px;
    -webkit-transform-origin: 168.577px 41.6788px 0px;
    -moz-transform-origin: 168.577px 41.6788px 0px;
    left: 10px;
    top: 101px;
}
.gwd-div-17al {
    position: absolute;
    width: 342px;
    height: 241px;
    transform-origin: 171.058px 119.674px 0px;
    -webkit-transform-origin: 171.058px 119.674px 0px;
    -moz-transform-origin: 171.058px 119.674px 0px;
    text-align: center;
    left: 5px;
    top: 184px;
}
.gwd-div-2eq3 {
    position: absolute;
    width: 1124px;
    height: 800px;
    transform-origin: 561.9px 400.657px 0px;
    -webkit-transform-origin: 561.9px 400.657px 0px;
    -moz-transform-origin: 561.9px 400.657px 0px;
    left: 40px;
    top: 426px;
}
.gwd-div-34k3 {
    position: absolute;
    width: 774px;
    height: 324px;
    transform-origin: 387px 162px 0px;
    -webkit-transform-origin: 387px 162px 0px;
    -moz-transform-origin: 387px 162px 0px;
    top: 101px;
    left: 347px;
}
pre.prettyprint {
    width: auto;
    overflow: auto;
    max-height: 300px;
}
.gwd-p-hhuu {
    position: absolute;
    width: 79px;
    left: 5px;
    height: 22px;
    transform-origin: 39.4731px 10.8139px 0px;
    -webkit-transform-origin: 39.4731px 10.8139px 0px;
    -moz-transform-origin: 39.4731px 10.8139px 0px;
    top: 1246px;
}
.gwd-a-10mc {
    font-size: 16px;
    top: 19px;
    left: -2px;
}</style>
</head>

<body class="htmlNoPages">
  <h1 class="gwd-p-u6h5">UBC Course Scraper and Database Accessor (Alpha)</h1>
  <p class="gwd-p-1vlm">Welcome to the UBC course database. This website is the home of a third party tool that scrapes and stores all the information on the UBC course website so that it can be easily accessed through an API. Anyone is welcome to use it but please do not
    spam the server.
  </p>
  <div class="gwd-div-190f">
    <h3>Database information</h3>
    <p id="lastScrapeId">Last Scrape:</p>
    <p id="scrapeStatus">Scrape Status:</p>
    <button onclick="update()">Update</button>
    <button onclick="location.href='/Departments';">Table View</button>
  </div>
  <div class="gwd-div-17al">
    <h4>Database Accessor</h4>
    <label for="search">Code:</label>
    <input id="search"><br>
    <br>
    
    <button onclick="getDepartments()">Get All Departments</button>
    <button onclick="getDepartmentByCode()">Get Department By Code</button>
    <button onclick="getCoursesByCode()">Get Courses By Code</button>
    <button onclick="getSectionsByCode()">Get Sections By Code</button>
    <button onclick="updateSectionInfo()">Update section info</button><br>
    
    <button onclick="clearbox()">Clear</button>
  </div>
  <div class="gwd-div-2eq3">
    <h4 class=""> API Access</h4>
    <p class="">You use the information stored by this app in your own program through the API provided here.</p>
    <strong>/getDepartments</strong> List of all departments returns a list of all the departments as json objects that looks like this:<br>
    
    <pre class="">    {
        ID: int
        Name: String
        Code: String
        URL: String
        Faculty: String
    }
    </pre>
    <strong>/getDepartmentByCode?code=""</strong> List of courses by department code returns a department specified with a 'code' parameter in the post message:
    <pre class="">    {
        ID: int
        Name: String
        Code: String
        URL: String
        Faculty: String
    }
    </pre>
    <strong>/getCoursesByCode?code=""</strong> List of courses by department code returns a list of all the courses in a department specified with a 'code' parameter in the post message:
    <pre class="">    {
        ID: int
        Name: String
        Code: String
        URL: String
    }
    </pre>
    <strong>/getSectionsByCode?code=""</strong> List of sections by course code returns a list of all the sections ina course specified with a 'code' parameter in the post message:
    <pre class="">    {
        ID: int
        Code: String
        Teacher: String
        Building: String
        Room: String
        TotalSeatsRemaining: int
        CurrentlyRegistered: int
        GeneralSeatsRemaining: int
        RestrictedSeatsRemaining: int
    }
    </pre>
    <strong>/getLastScrapeTime</strong> Returns the last time the database was updated.
  </div>
  <div class="gwd-div-34k3">
    <pre class="prettyprint lang-json" id="result"></pre>
  </div>
  <p class="gwd-p-hhuu"><a href="https://github.com/Ciuffi/UBCCourseScraper" target="_blank" class="gwd-a-10mc">Github</a><br>
    
  </p>


</body></html>
